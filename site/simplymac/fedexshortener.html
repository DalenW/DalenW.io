<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>DalenW - Home</title>
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
        <link type="text/css" rel="stylesheet" href="/styles/main.css">
    </head>

    <style>
        main {
            padding-left: 10%
        }
        #barcodeInput {
            width: 350px;
        }

        #clearButton {
            width: 75px;
        }
        p {
            margin-top: 10px;
        }
    </style>

    <body>
        <header>
            <h1 style="text-align: center">FedEx Tracking Number Shortener</h1>
        </header>

        <main>
            <form action="javascript:clear()">
                FedEx Barcode:
                <input type="text" name="barcode" id="barcodeInput">
                <!-- <button type="button" id="clearButton" onclick="javascript:clear();">Clear</button> -->
                <br>
                <!-- <input type="submit" value="Submit" id="submitButton"> -->
            </form>

            <p>The shortened tracking number is: <b id="output" contenteditable="true">null</b></p>
            <p id="copyAlert" style="color: red">Copied!</p>
        </main>
    </body>

    <script src="/scripts/jquery.js"></script>
    <script>
        clear();
        $("#copyAlert").hide();

        function clear() {
            $("#barcodeInput").val('');
            //console.log("test");
        }

        $("#barcodeInput").keyup(function () {
            var value = $("#barcodeInput").val();

            if(value.length == 34) {
                if(value.slice(0, 4) == "1001") {
                    var bar = value.slice(22, 26) + " " + value.slice(26, 30) + " " + value.slice(30);
                    
                    console.log(bar);
                    $("#output").html(bar);

                    var copyText = document.querySelector("#output");
                    console.log(copyText);
                    //copyText.select();
                    document.execCommand("copy");

                    //$("#copyAlert").show();
                    //$("#copyAlert").fadeOut(4000);
                    
                }
            }
            //console.log("Value = %v", value);
        });
    </script>
</html>